<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Julee" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Fredericka+the+Great" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Akronim|Barlow+Semi+Condensed|Eagle+Lake|Farsan|Indie+Flower|Marck+Script|Miss+Fajardose|Monsieur+La+Doulaise|Mrs+Saint+Delafield|Poiret+One|Snippet|Stint+Ultra+Expanded|Tangerine" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Akronim|Barlow+Semi+Condensed|Eagle+Lake|Farsan|Indie+Flower|Marck+Script|Miss+Fajardose|Monsieur+La+Doulaise|Mrs+Saint+Delafield|Poiret+One|Snippet|Stint+Ultra+Expanded|Tangerine" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.0/mapsjs-ui.css?dp-version=1549984893" />
    <link href="css/render.css" rel="stylesheet" type="text/css"/>
    <script src="https://js.api.here.com/v3/3.0/mapsjs-core.js"type="text/javascript" charset="utf-8"></script>
    <script src="https://js.api.here.com/v3/3.0/mapsjs-service.js"type="text/javascript" charset="utf-8"></script>
    <script src="https://js.api.here.com/v3/3.0/mapsjs-ui.js"type="text/javascript" charset="utf-8"></script>
    <script src="https://js.api.here.com/v3/3.0/mapsjs-mapevents.js"type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript"src="https://js.api.here.com/v3/3.0/mapsjs-places.js" charset="UTF-8"></script>
    <link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.0/mapsjs-ui.css" />
    <title>Find a Place</title>
  </head>
  <body>
    <article class="rendercontainer">
      <div class="rendernavigationbar">
        <div>
          <h1 class="renderintroductory" onclick="fid()">FIND A PLACE !!!</h1>
          <section class="where">
            <p class="placeweare"></p>
            <p id="filtertext"></p>
          </section>
        </div>
      </div>
    </article>
    <div class="container">
      <article class="innermapping">
        <div class="filtersidebar">
          <section class="outsidebtn">
            <div class="sidebarbtns" onclick = "animal()" id="animal">
                <p class="first">animal</p>
            </div>
            <div class="sidebarbtns" onclick = "art()" id="art">
                <p class="first">Art</p>
            </div>
            <div class="sidebarbtns" onclick = "restaurants()" id="restaurants">
                <p class="first">Restaurants</p>
            </div>
            <div class="sidebarbtns" onclick = "historyy()" id="museum">
                <p class="first">History</p>
            </div>
            <div class="sidebarbtns" onclick = "gaming()" id="game">
                <p class="first">Gaming</p>
            </div>
            <div class="sidebarbtns" onclick = "malls()" id="malls">
                <p class="first">Malls</p>
            </div>
            <div class="sidebarbtns" onclick = "music()" id="music">
                <p class="first">Music</p>
            </div>
            <div class="sidebarbtns" onclick = "movies()" id="cinema">
                <p class="first">Movies</p>
            </div>
            <div class="sidebarbtns" onclick = "hotels()" id="hotel">
                <p class="first">Hotels</p>
            </div>
            <div class="sidebarbtns" onclick = "markets()" id="market">
                <p class="first">Markets</p>
            </div>
            <div class="sidebarbtns" onclick = "coffee()" id="coffee">
                <p class="first">coffee</p>
            </div>
            <div class="sidebarbtns" onclick = "shoes()" id="shoes">
                <p class="first">shoes</p>
            </div>
            <div class="sidebarbtns" onclick = "beauty()" id="beauty">
                <p class="first">beauty</p>
            </div>
            <div class="sidebarbtns" onclick = "kinyozi()" id="kinyozi">
                <p class="first">kinyozi</p>
            </div>
            <div class="sidebarbtns" onclick = "church()" id="church">
                <p class="first">church</p>
            </div>
            <div class="sidebarbtns" onclick = "food()" id="food">
                <p class="first">food</p>
            </div>
            <div class="sidebarbtns" onclick = "club()" id="club">
                <p class="first">club</p>
            </div>
            <div class="sidebarbtns" onclick = "pub()" id="pub">
                <p class="first">pub</p>
            </div>
            <div class="sidebarbtns" onclick = "swim()" id="swim">
                <p class="first">swim</p>
            </div>
            <div class="sidebarbtns" onclick = "dance()" id="dance">
                <p class="first">dance</p>
            </div>
            <div class="sidebarbtns" onclick = "sports()" id="sport">
                <p class="first">sports</p>
            </div>
            <div class="sidebarbtns" onclick = "casino()" id="casino">
                <p class="first">Casino</p>
            </div>
          </section>
        </div>
        <section id="mapContainer"></section>
      </article>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="js/render.js" type="text/javascript" charset="utf-8"></script>
    <script>
    //map code
    var platform = new H.service.Platform({
      'app_id': '9gBXw1VI13K0b8aaF3YG',
      'app_code': 'hRFo_EIlBvOQkJeDrdor4w',
      'useHTTPS': true,
    });
    // Obtain the default map types from the platform object:
    var defaultLayers = platform.createDefaultLayers();
    var animal = () => {
      sessionStorage.setItem("filter","animal");
      location.reload();
    };
    var malls = () => {
      sessionStorage.setItem("filter","malls");
      location.reload();
    }
    var music = () => {
      sessionStorage.setItem("filter","music");
      location.reload();
    }
    var beauty = () => {
      sessionStorage.setItem("filter","beauty");
      location.reload();
    }
    var art = () => {
      sessionStorage.setItem("filter","art");
      location.reload();
    };
    var markets = () => {
      sessionStorage.setItem("filter","market");
      location.reload();
    }
    var coffee = () => {
      sessionStorage.setItem("filter","coffee");
      location.reload();
    }
    var shoes = () => {
      sessionStorage.setItem("filter","shoes");
      location.reload();
    }
    var restaurants = () => {
      sessionStorage.setItem("filter","restaurants");
      location.reload();
    };
    var historyy = () => {
      sessionStorage.setItem("filter","museum");
      location.reload();
    };
    var gaming = () => {
      sessionStorage.setItem("filter","game");
      location.reload();
    };
    var food = () => {
      sessionStorage.setItem("filter","food");
      location.reload();
    }
    var hotels = () => {
      sessionStorage.setItem("filter","hotel");
      location.reload();
    }
    var church = () => {
      sessionStorage.setItem("filter","church");
      location.reload();
    }
    var movies = () => {
      sessionStorage.setItem("filter","cinema");
      location.reload();
    }
    var kinyozi = () => {
      sessionStorage.setItem("filter","kinyozi");
      location.reload();
    }
    var club = () => {
      sessionStorage.setItem("filter","club");
      location.reload();
    }
    var pub = () => {
      sessionStorage.setItem("filter","pub");
      location.reload();
    }
    var swim = () => {
      sessionStorage.setItem("filter","swim");
      location.reload();
    }
    var dance = () => {
      sessionStorage.setItem("filter","dance");
      location.reload();
    }
    var sports = () => {
      sessionStorage.setItem("filter","sport");
      location.reload();
    }
    var casino = () => {
      sessionStorage.setItem("filter","casino");
      location.reload();
    }
    var setthefil = () => {
      var check = sessionStorage.getItem("filter");
      if(!check)
      {
        filter = "animal";
      }
      else
      {
        filter = check;
      }
    }
    setthefil();
    var filter;
    var findplaceclicked = (data) => {
      if(data === "Parklands")
      {
        //set the coordinates
        mycoors = "-1.2599,36.8179";
        mycoorslat = -1.2599;
        mycoorslong = 36.8179;
      }
      else if(data === "Town")
      {
        //set the coordinates
        mycoors = '-1.2921,36.8219';
        mycoorslat = -1.2921;
        mycoorslong = 36.8219;
      }
      else if(data === "Westlands")
      {
        //set the coordinates
        mycoors = '-1.2683,36.8111';
        mycoorslat = -1.2683;
        mycoorslong = 36.8111;
      }
      else if(data === "Mombassa")
      {
        //set coordinates
        //is Mombassa
        mycoors = '-4.036878,39.669571';
        mycoorslat = -4.036878;
        mycoorslong = 39.669571;
      }
      else if(data === "Karen")
      {
        //set coordinates
        mycoors = '-1.3169,36.6903';
        mycoorslat = -1.3169;
        mycoorslong = 36.6903;
      }
      else if(data === "Embakassi")
      {
        //set coordinates
        mycoors = '-1.3327,36.9004';
        mycoorslat = -1.3327;
        mycoorslong = 36.9004;
      }
      else
      {
        alert("FATAL:Wrong Gateway")
      }
    };
    var locationclicked = sessionStorage.getItem("city");
    findplaceclicked(locationclicked);

    // Instantiate the map:
    var mycoorslat;
    var mycoorslong;
    var map = new H.Map(
       document.getElementById('mapContainer'),
       defaultLayers.normal.map,
       {
         zoom: 11,
         center: { lat: mycoorslat, lng: mycoorslong }
    });
    //map mapevents
    var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));
    // Add event listener:
    map.addEventListener('drag', function(evt) {
      // Log 'tap' and 'mouse' events:
      //console.log(evt.type, evt.currentPointer.type);
    });
    map.addEventListener('dragend', function(evt) {
      // Log 'tap' and 'mouse' events:
      //console.log(evt.type, evt.currentPointer.type);
    });
    // Create a group object to hold map markers:
    var group = new H.map.Group();

    // Create the default UI:

    var ui = H.ui.UI.createDefault(map, defaultLayers , 'en-US');
    map.addObject(group);

    // Obtain a Search object through which to submit search
    // requests:
    var search = new H.places.Search(platform.getPlacesService()),
          searchResult, error;
    var mycoors;
    // Define search parameters:
    var params = {
      // Plain text search for places with the word "hotel"
      // associated with them:
        'q': filter,
        'at': mycoors,
      };

    // Define a callback function to handle data on success:
    function onResult(data) {
        addPlacesToMap(data.results);
        console.log("ok");
    }

    // Define a callback function to handle errors:
    function onError(data) {
        error = data;
    }

    // This function adds markers to the map, indicating each of
    // the located places:
    function addPlacesToMap(result) {
          group.addObjects(result.items.map(function(place){
            console.log(place);
            var marker = new H.map.Marker({lat: place.position[0],lng: place.position[1]});
            marker.addEventListener("tap",function(event){
              var bubble = new H.ui.InfoBubble({ lat: place.position[0], lng: place.position[1]}, {
                      content: "<div class='bubblebox'>"+
                                  "<section class='innerbubblebox'>"+
                                    "<p><u>"+place.vicinity+"</u></p>"+
                                    "<p>"+place.title+"</p>"+
                                  "</section>"+
                                "</div>"
                     });
              ui.addBubble(bubble);
            });
            return marker;
          }));
    }
    // Run a search request with parameters, headers (empty), and
    search.request(params, {}, onResult, onError);
    </script>
    <div class="well" id="footer">
      <ul>
        <li><a href="index.html">home</a>  <a href="aboutus.html">About Us</a>  <a href="contact.html">Conact Us</a></li>
        <li>Copyright © 2019 findaplace</li>
      </ul>
    </div>
  </body>
  </body>
</html>
